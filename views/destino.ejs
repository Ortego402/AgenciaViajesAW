<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="../css/index.css">
    <link rel="stylesheet" type="text/css" href="../css/destino.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <title>EpicScape-<%= result.nombre %></title>
    <link rel="icon" href="../images/logo.png" type="image/x-icon">
</head>
<body>
    <header class="container-fluid">
        <a href="/" class="botoninicio">
          <h2><strong>EpicScape</strong></h2>
        </a>
        <form action="/" method="get">
          <div class="buscador">
            <input id="busquedaGlobal" type="search" class="caja" placeholder="Próximo destino..." name="nombreBuscar" required>
            <button class="boton" type="submit"><i class="bi bi-search"></i></button>
          </div>
        </form>
        <img src="../images/logo.png" class="img" alt="Imagen sustitutiva de login">
    </header>

      <nav class="navbar">
        <!-- <a href="#"><button class="moving-text">texto que se mueve</div></a> -->
          <a href="#" class="botonnav">Nosotros</a>
          <a href="#" class="botonnav">Servicios</a>
          <a href="#" class="botonnav">Contacto</a>
      </nav>

      <main>
        <div class="border-bottom">
            <h2 class="titulo-dest"><strong><%= result.nombre %></strong></h2>
        </div>
        <div class="destino-container">
            <div class="row mx-n2">
                <div class="col-md-6 d-flex justify-content-center align-items-center mt-3">
                    <div class="border border-end">
                        <div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                <% results.forEach((imagen, index) => { %>
                                    <div class="img-mediana rounded carousel-item <%= index === 0 ? 'active' : '' %>">
                                        <img src="<%= imagen.url %>" class="img-fluid" alt="<%= result.nombre %>">
                                    </div>
                                <% }); %>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="destino-info bg-secondary p-4 bg-opacity-25 mx-auto rounded d-flex flex-column">
                        <p class="desc"><%= result.descripcion %></p>
                        <div class="mt-auto d-flex justify-content-between align-items-center">
                            <h4 class="price end-0 mb-0">Por solamente: <%= result.precio %>€</h4>
                            <button onclick="mostrarPopup()" type="button" class="reservar-btn mt-auto btn btn-danger px-3 py-3">Reservar</button>
                        </div>
                    </div>
                
                    <!-- Contenido de la ventana emergente -->
                    <div class="popup-container" id="popup">
                        <div class="popup-content">
                            <form action="/reserva" method="POST" class="general">
                                <div class="form-group">
                                    <label for="nombre">Nombre:</label>
                                    <input type="text" class="form-control" id="nombre" name="nombre" value = "<% if(typeof valores != 'undefined') { %><%= valores.Nombre %><%}%>" required><br><br>
                                </div>

                                <div class="form-group">
                                    <label for="email">Email:</label>
                                    <input type="email" class="form-control" id="email" name="email" value = "<% if(typeof valores != 'undefined') { %><%= valores.Email %><%}%>" required><br><br>    
                                </div>

                                <div class="form-group"></div>
                                    <label for="fecha_reserva">Fecha de Llegada:</label>
                                    <input type="date" class="form-control" id="fecha_reserva" name="fecha_reserva" value = "<% if(typeof valores != 'undefined') { %><%= valores.Email %><%}%>" required><br><br>
                                </div>

                                <div class="button-container">
                                    <button type="submit" class="botonconfirmar">Confirmar</button>
                                    <button type="button" onclick="cerrarPopup()" class="cerrar-btn">Cerrar</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>        
    </main>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Función para mostrar la ventana emergente
        function mostrarPopup() {
            document.getElementById('popup').style.display = 'block';
        }
    
        // Función para cerrar la ventana emergente
        function cerrarPopup() {
            document.getElementById('popup').style.display = 'none';
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-lightbox@0.7.0/dist/bootstrap-lightbox.min.js"></script>
</body>
</html>